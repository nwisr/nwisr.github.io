!function(a,b,c){"use strict";function d(b){console.error(b),a("#errorMessage").html(b.message),p("#panelError")}function e(){p("#panelFail")}function f(a){return console.log("setting up client",a),a.token?void b.client.create({authorization:a.token},g):(console.error("Error connecting to payment provider",a),e())}function g(a,c){return a?(console.error("Error creating payment client",a),e()):void b.hostedFields.create({client:c,styles:{input:{"font-size":"14px","font-family":"courier, monospace",color:"#3a3a3a"},":focus":{color:"black"},".valid":{color:"limegreen"},".invalid":{color:"tomato"}},fields:{number:{selector:"#frmCCNum",placeholder:"4111 1111 1111 1111"},cvv:{selector:"#frmCCCVC",placeholder:"123"},expirationDate:{selector:"#frmCCExp",placeholder:"MM/YY"},postalCode:{selector:"#frmCCZip",placeholder:"90210"}}},h)}function h(b,c){return b?(console.error("Error creating hosted fields",b),e()):(c.on("validityChange",function(b){var c=b.fields[b.emittedBy];c.isValid?a(c.container).addClass("braintree-hosted-fields-valid"):c.isPotentiallyValid?(a(c.container).removeClass("braintree-hosted-fields-valid"),a(c.container).removeClass("braintree-hosted-fields-invalid")):a(c.container).addClass("braintree-hosted-fields-invalid")}),c.on("cardTypeChange",function(a){}),void i(c))}function i(b){a(document).ready(function(){a("input").on("focus",function(b){var c=a(b.target).parent();c.removeClass("braintree-hosted-fields-valid"),c.removeClass("braintree-hosted-fields-invalid"),c.addClass("braintree-hosted-fields-focused")}).on("blur",function(b){var c=a(b.target).parent();c.removeClass("braintree-hosted-fields-focused"),c.removeClass("braintree-hosted-fields-valid"),c.removeClass("braintree-hosted-fields-invalid"),b.target.checkValidity()?c.addClass("braintree-hosted-fields-valid"):c.addClass("braintree-hosted-fields-invalid")});new c(document.getElementById("frmPhone"),{pattern:"({{999}}) {{999}}-{{9999}}"});a("button").click(o(b)),a("#frmFee").on("blur",function(){a("#btnPay").html("Send $"+a("#frmFee").val().trim()+" Payment"),a("#feeDisplay").html("$"+a("#frmFee").val().trim())}),p("#panel1")})}function j(b,c,d){a.ajax({url:window.CONFIG.checkoutUrl,type:"POST",contentType:"application/json; charset=UTF-8",data:{nonce:b.nonce,merchant:b.merchant,purpose:b.purpose,payor:b.payor,reason:b.reason,amount:b.amount,email:b.email,phone:b.phone,name:b.name},crossDomain:!0}).done(c).fail(d)}function k(b,c){a.ajax({url:window.CONFIG.tokenUrl,type:"GET",crossDomain:!0}).done(b).fail(c)}function l(a,b){console.log("fail loading client token"),e()}function m(b,c){a("#frmPurpose").val(b),a("#frmFee").val(c),a("#btnPay").html("Send $"+c+" Payment"),a("#feeDisplay").html("$"+c)}function n(b){a("#lblFee, #lblReason").hide(),a("#wrapFee, #wrapReason").hide(),a("#frmFee, #frmReason, #frmCCName").removeAttr("required"),a(b.show).show(),a(b.required).attr("required","required")}function o(b){return function(c){var e=c.target.id,f=a(c.target).data("amount"),g=a(c.target).data("panel");switch(e){case"btnIndoor":m("indoor",f),n({show:"",required:""});break;case"btnFutsal":m("futsal",f),n({show:"",required:""});break;case"btnBoth":m("both",f),n({show:"",required:""});break;case"btnRecert":m("recertification",f),n({show:"",required:""});break;case"btnOther":m("other",f),n({show:"#lblReason, #wrapReason, #lblFee, #wrapFee",required:"#frmReason, #frmFee"});break;case"btnNext":q()?a("#frmCCName").attr("required","required"):g=null;break;case"btnPay":c.preventDefault(),a(c.target).prop("disabled",!0),b.tokenize(function(b,e){if(b)return d(b);console.log("payment method received",e);var f=a.extend(s(),{nonce:e.nonce});j(f,function(b){a("#feeDisplay").html("$"+b.amount),a("#cardTypeDisplay").html(b.cardType),a("#last4Display").html(b.last4),a("#descriptorDisplay").html(b.descriptor),a("#transactionIdDisplay").html(b.id),p("#panel4")},function(b){return a(c.target).prop("disabled",!1),d(b)})});break;case"btnBack1":case"btnBack2":case"btnRetry":break;case"btnCancel":case"btnDone":window.location.replace("/")}g&&p(g)}}function p(b){a("#panel0, #panel1, #panel2, #panel3, #panel4, #panelError, #panelFail").removeClass("hidden").hide(),a(b).show()}function q(){var b=a("#frmPayor, #frmFee, #frmReason, #frmEmail, #frmPhone");return r(b)?(a("#frmCCName, #frmCCNum, #frmCCExp, #frmCCCVC, #frmCCZip").attr("required","required"),!0):!1}function r(b){for(var c=!0,d=0,e=b.length;e>d;d++){var f=a(b[d]).parent();b[d].checkValidity()?f.addClass("braintree-hosted-fields-valid"):(f.addClass("braintree-hosted-fields-invalid"),c=!1)}return c}function s(){return{merchant:a("#frmMerchant").val().trim(),purpose:a("#frmPurpose").val().trim(),payor:a("#frmPayor").val().trim(),reason:a("#frmReason").val().trim(),amount:a("#frmFee").val().trim(),email:a("#frmEmail").val().trim(),phone:a("#frmPhone").val().trim(),name:a("#frmCCName").val().trim(),number:a("#frmCCNum").val().trim(),expiry:a("#frmCCExp").val().trim(),cvc:a("#frmCCCVC").val().trim(),zip:a("#frmCCZip").val().trim()}}k(f,l)}(jQuery,braintree,Formatter);